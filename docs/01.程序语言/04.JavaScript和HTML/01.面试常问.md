---
title: 面试常问
date: 2021-04-12 22:18:18
permalink: /pages/327398/
categories:
  - 程序语言
  - JavaScript
tags:
  - 
---

## JavaScript相关

### JavaScript事件机制

DOM事件流（event flow ）存在三个阶段：**事件捕获阶段、处于目标阶段、事件冒泡阶段。**

**事件捕获（event  capturing）**： 通俗的理解就是，当鼠标点击或者触发dom事件时，浏览器会从根节点开始由外到内进行事件传播，即点击了子元素，如果父元素通过事件捕获方式注册了对应的事件的话，会先触发父元素绑定的事件。

**事件冒泡（dubbed  bubbling）**：与事件捕获恰恰相反，事件冒泡顺序是由内到外进行事件传播，直到根节点。

dom标准事件流的触发的先后顺序为：**先捕获再冒泡**，即当触发dom事件时，会先进行事件捕获，捕获到事件源之后通过事件传播进行事件冒泡

**事件冒泡**

```html
<html lang="zh-cn">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>js事件机制</title>
    <style>
        #parent{
            width: 200px;
            height:200px;
            text-align: center;
            line-height: 3;
            background: green;
        }
        #child{
            width: 100px;
            height: 100px;
            margin: 0 auto;
            background: orange;
        }
    </style>
    </head>
<body>
    <div id="parent">
        父元素
        <div id="child">
            子元素
        </div>
    </div>
    <script type="text/javascript">
        var parent = document.getElementById("parent");
        var child = document.getElementById("child");
        document.body.addEventListener("click",function(e){
            console.log("click-body");
        },false);
        parent.addEventListener("click",function(e){
            console.log("click-parent");
        },false);
        child.addEventListener("click",function(e){
            console.log("click-child");
        },false);
    </script>
</body>
</html>
```

通过"addEventListener"方法，采用事件冒泡方式给dom元素注册click事件，点击子元素会发生什么呢？如果你对事件冒泡有一定了解的话那你肯定知道上面的代码会输出的顺序，没错，如下图所示：

![img](https://img.xiaoyou66.com/2021/04/12/1a20c2048fe58.png)

这里有同学可能要问了，如果点击子元素不想触发父元素的事件怎么办？肯定可以的，那就是停止事件传播---event.stopPropagation();  我们可以把代码修改为如下形式

```js
child.addEventListener("click",function(e){
　　console.log("click-child");
  　e.stopPropagation();
},false);
```

**事件捕获**

```java
var parent = document.getElementById("parent");
var child = document.getElementById("child");
document.body.addEventListener("click",function(e){
    console.log("click-body");
},false);
parent.addEventListener("click",function(e){
    console.log("click-parent---事件传播");
},false);
//新增事件捕获事件代码
parent.addEventListener("click",function(e){
    console.log("click-parent--事件捕获");
},true);

child.addEventListener("click",function(e){
    console.log("click-child");
},false);
```

![img](https://img.xiaoyou66.com/2021/04/12/bcd9fbd702c34.png)

**事件委托**

下面举一个简单的栗子，通过js实现通过parent元素给child元素注册click事件

```JavaScript
var parent = document.getElementById("parent");
var child = document.getElementById("child");
parent.onclick = function(e){
            if(e.target.id == "child"){
                console.log("您点击了child元素")
            }
}
```

虽然没有直接只child元素注册click事件，可是点击child元素时却弹出了提示信息。

[JavaScript 详说事件机制之冒泡、捕获、传播、委托](https://www.cnblogs.com/bfgis/p/5460191.html)

## HTML相关

### 怎么优化界面，让用户体验更好

- 减少 HTTP 请求

- 使用 HTTP2

- 使用服务端渲染

  客户端渲染: 获取 HTML 文件，根据需要下载 JavaScript 文件，运行文件，生成 DOM，再渲染。

  服务端渲染：服务端返回 HTML 文件，客户端只需解析 HTML。

-  静态资源使用 CDN

- 将 CSS 放在文件头部，JavaScript 文件放在底部

- 使用字体图标 iconfont 代替图片图标

- 善用缓存，不重复加载相同的资源

- 压缩文件

- 图片优化

  - 延迟加载（懒加载）
  - 响应式图片
  - 调整图片大小
  - 减低图片质量
  - 尽可能利用 CSS3 效果代替图片
  - 使用 webp 格式的图片

- 通过 webpack 按需加载代码，提取第三库代码，减少 ES6 转为 ES5 的冗余代码

- 减少重绘重排

- 使用事件委托

-  注意程序的局部性

-  if-else 对比 switch

  - 当判断条件数量越来越多时，越倾向于使用 switch 而不是 if-else。

- 查找表

  - 当条件语句特别多时，使用 switch 和 if-else 不是最佳的选择，这时不妨试一下查找表。查找表可以使用数组和对象来构建。

- 避免页面卡顿

- 使用 requestAnimationFrame 来实现视觉变化

- 使用 Web Workers

- 使用位操作

- 不要覆盖原生方法

- 降低 CSS 选择器的复杂性

- 使用 flexbox 而不是较早的布局模型

- 使用 transform 和 opacity 属性更改来实现动画

-  合理使用规则，避免过度优化

就是上面这些。。。太强了。看参考文章吧

参考：

- [前端性能优化 24 条建议（2020） - SegmentFault 思否](https://segmentfault.com/a/1190000022205291)

